(function (f, o, d) { var C = { transition: "elastic", speed: 300, width: false, initialWidth: "600", innerWidth: false, maxWidth: false, height: false, initialHeight: "450", innerHeight: false, maxHeight: false, scalePhotos: true, scrolling: true, inline: false, html: false, iframe: false, fastIframe: true, photo: false, href: false, title: false, rel: false, opacity: 0.9, preloading: true, current: "image {current} of {total}", previous: "previous", next: "next", close: "close", open: false, returnFocus: true, loop: true, slideshow: false, slideshowAuto: true, slideshowSpeed: 2500, slideshowStart: "start slideshow", slideshowStop: "stop slideshow", onOpen: false, onLoad: false, onComplete: false, onCleanup: false, onClosed: false, overlayClose: true, escKey: true, arrowKey: true, top: false, bottom: false, left: false, right: false, fixed: false, data: false }, s = "colorbox", g = "cbox", S = g + "Element", b = g + "_open", i = g + "_load", a = g + "_complete", z = g + "_cleanup", r = g + "_closed", N = g + "_purge", u = f.browser.msie && !f.support.opacity, Z = u && f.browser.version < 7, T = g + "_IE6", L, ad, G, Y, W, Q, P, ae, ac, J, p, R, B, K, X, I, t, O, H, D, q, h, U, F, m, c, E, ab, e, j, l, w, n, y; function k(ah, ag, af) { af = o.createElement("div"); if (ah) { af.id = g + ah } af.style.cssText = ag || ""; return f(af) } function aa(af, ag) { return Math.round((/%/.test(af) ? ((ag === "x" ? J.width() : J.height()) / 100) : 1) * parseInt(af, 10)) } function V(af) { return q.photo || /\.(gif|png|jpg|jpeg|bmp)(?:\?([^#]*))?(?:#(\.*))?$/i.test(af) } function A(af) { q = f.extend({}, f.data(c, s)); for (af in q) { if (f.isFunction(q[af]) && af.substring(0, 2) !== "on") { q[af] = q[af].call(c) } } q.rel = q.rel || c.rel || "nofollow"; q.href = q.href || f(c).attr("href"); q.title = q.title || c.title; if (typeof q.href === "string") { q.href = f.trim(q.href) } } function v(af, ag) { if (ag) { ag.call(c) } f.event.trigger(af) } function x() { var aj, ai = g + "Slideshow_", ak = "click." + g, ah, af, ag; if (q.slideshow && ac[1]) { ah = function () { I.text(q.slideshowStop).unbind(ak).bind(a, function () { if (E < ac.length - 1 || q.loop) { aj = setTimeout(y.next, q.slideshowSpeed) } }).bind(i, function () { clearTimeout(aj) }).one(ak + " " + z, af); ad.removeClass(ai + "off").addClass(ai + "on"); aj = setTimeout(y.next, q.slideshowSpeed) }; af = function () { clearTimeout(aj); I.text(q.slideshowStart).unbind([a, i, z, ak].join(" ")).one(ak, ah); ad.removeClass(ai + "on").addClass(ai + "off") }; if (q.slideshowAuto) { ah() } else { af() } } else { ad.removeClass(ai + "off " + ai + "on") } } function M(af) { if (!l) { c = af; A(); ac = f(c); E = 0; if (q.rel !== "nofollow") { ac = f("." + S).filter(function () { var ah = f.data(this, s).rel || this.rel; return (ah === q.rel) }); E = ac.index(c); if (E === -1) { ac = ac.add(c); E = ac.length - 1 } } if (!e) { e = j = true; ad.show(); if (q.returnFocus) { try { c.blur(); f(c).one(r, function () { try { this.focus() } catch (ah) { } }) } catch (ag) { } } L.css({ opacity: +q.opacity, cursor: q.overlayClose ? "pointer" : "auto" }).show(); q.w = aa(q.initialWidth, "x"); q.h = aa(q.initialHeight, "y"); y.position(); if (Z) { J.bind("resize." + T + " scroll." + T, function () { L.css({ width: J.width(), height: J.height(), top: J.scrollTop(), left: J.scrollLeft() }) }).trigger("resize." + T) } v(b, q.onOpen); D.add(K).hide(); H.html(q.close).show() } y.load(true) } } y = f.fn[s] = f[s] = function (af, ah) { var ag = this; af = af || {}; if (!ag[0]) { if (ag.selector) { return ag } ag = f("<a/>"); af.open = true } if (ah) { af.onComplete = ah } ag.each(function () { f.data(this, s, f.extend({}, f.data(this, s) || C, af)); f(this).addClass(S) }); if ((f.isFunction(af.open) && af.open.call(ag)) || af.open) { M(ag[0]) } return ag }; y.init = function () { J = f(d); ad = k().attr({ id: s, "class": u ? g + (Z ? "IE6" : "IE") : "" }); L = k("Overlay", Z ? "position:absolute" : "").hide(); G = k("Wrapper"); Y = k("Content").append(p = k("LoadedContent", "width:0; height:0; overflow:hidden"), B = k("LoadingOverlay").add(k("LoadingGraphic")), K = k("Title"), X = k("Current"), t = k("Next"), O = k("Previous"), I = k("Slideshow").bind(b, x), H = k("Close")); G.append(k().append(k("TopLeft"), W = k("TopCenter"), k("TopRight")), k(false, "clear:left").append(Q = k("MiddleLeft"), Y, P = k("MiddleRight")), k(false, "clear:left").append(k("BottomLeft"), ae = k("BottomCenter"), k("BottomRight"))).children().children().css({ "float": "left" }); R = k(false, "position:absolute; width:9999px; visibility:hidden; display:none"); alert($('#form1').length); if ($('#form1').length) { $("#form1").prepend(L, ad.append(G, R)); } else { f("body").prepend(L, ad.append(G, R)); } Y.children().hover(function () { f(this).addClass("hover") }, function () { f(this).removeClass("hover") }).addClass("hover"); h = W.height() + ae.height() + Y.outerHeight(true) - Y.height(); U = Q.width() + P.width() + Y.outerWidth(true) - Y.width(); F = p.outerHeight(true); m = p.outerWidth(true); ad.css({ "padding-bottom": h, "padding-right": U }).hide(); t.click(function () { y.next() }); O.click(function () { y.prev() }); H.click(function () { y.close() }); D = t.add(O).add(X).add(I); Y.children().removeClass("hover"); L.click(function () { if (q.overlayClose) { y.close() } }); f(o).bind("keydown." + g, function (ag) { var af = ag.keyCode; if (e && q.escKey && af === 27) { ag.preventDefault(); y.close() } if (e && q.arrowKey && ac[1]) { if (af === 37) { ag.preventDefault(); O.click() } else { if (af === 39) { ag.preventDefault(); t.click() } } } }) }; y.remove = function () { ad.add(L).remove(); f("." + S).removeData(s).removeClass(S) }; y.position = function (ah, aj) { var ag = 0, ai = 0; J.unbind("resize." + g); ad.hide(); if (q.fixed && !Z) { ad.css({ position: "fixed" }) } else { ag = J.scrollTop(); ai = J.scrollLeft(); ad.css({ position: "absolute" }) } if (q.right !== false) { ai += Math.max(J.width() - q.w - m - U - aa(q.right, "x"), 0) } else { if (q.left !== false) { ai += aa(q.left, "x") } else { ai += Math.round(Math.max(J.width() - q.w - m - U, 0) / 2) } } if (q.bottom !== false) { ag += Math.max(o.documentElement.clientHeight - q.h - F - h - aa(q.bottom, "y"), 0) } else { if (q.top !== false) { ag += aa(q.top, "y") } else { ag += Math.round(Math.max(o.documentElement.clientHeight - q.h - F - h, 0) / 2) } } ad.show(); ah = (ad.width() === q.w + m && ad.height() === q.h + F) ? 0 : ah || 0; G[0].style.width = G[0].style.height = "9999px"; function af(ak) { W[0].style.width = ae[0].style.width = Y[0].style.width = ak.style.width; B[0].style.height = B[1].style.height = Y[0].style.height = Q[0].style.height = P[0].style.height = ak.style.height } ad.dequeue().animate({ width: q.w + m, height: q.h + F, top: ag, left: ai }, { duration: ah, complete: function () { af(this); j = false; G[0].style.width = (q.w + m + U) + "px"; G[0].style.height = (q.h + F + h) + "px"; if (aj) { aj() } setTimeout(function () { J.bind("resize." + g, y.position) }, 1) }, step: function () { af(this) } }) }; y.resize = function (af) { if (e) { af = af || {}; if (af.width) { q.w = aa(af.width, "x") - m - U } if (af.innerWidth) { q.w = aa(af.innerWidth, "x") } p.css({ width: q.w }); if (af.height) { q.h = aa(af.height, "y") - F - h } if (af.innerHeight) { q.h = aa(af.innerHeight, "y") } if (!af.innerHeight && !af.height) { var ag = p.wrapInner("<div style='overflow:auto'></div>").children(); q.h = ag.height(); ag.replaceWith(ag.children()) } p.css({ height: q.h }); y.position(q.transition === "none" ? 0 : q.speed) } }; y.prep = function (ai) { if (!e) { return } var aj, ag = q.transition === "none" ? 0 : q.speed; p.remove(); p = k("LoadedContent").append(ai); function af() { q.w = q.w || p.width(); q.w = q.mw && q.mw < q.w ? q.mw : q.w; return q.w } function ah() { q.h = q.h || p.height(); q.h = q.mh && q.mh < q.h ? q.mh : q.h; return q.h } p.hide().appendTo(R.show()).css({ width: af(), overflow: q.scrolling ? "auto" : "hidden" }).css({ height: ah() }).prependTo(Y); R.hide(); f(ab).css({ "float": "none" }); if (Z) { f("select").not(ad.find("select")).filter(function () { return this.style.visibility !== "hidden" }).css({ visibility: "hidden" }).one(z, function () { this.style.visibility = "inherit" }) } aj = function () { var am, al, ak, ar, ap = ac.length, ao, aq; if (!e) { return } function an() { if (u) { ad[0].style.removeAttribute("filter") } } aq = function () { clearTimeout(n); B.hide(); v(a, q.onComplete) }; if (u) { if (ab) { p.fadeIn(100) } } K.html(q.title).add(p).show(); if (ap > 1) { if (typeof q.current === "string") { X.html(q.current.replace("{current}", E + 1).replace("{total}", ap)).show() } t[(q.loop || E < ap - 1) ? "show" : "hide"]().html(q.next); O[(q.loop || E) ? "show" : "hide"]().html(q.previous); am = E ? ac[E - 1] : ac[ap - 1]; ak = E < ap - 1 ? ac[E + 1] : ac[0]; if (q.slideshow) { I.show() } if (q.preloading) { ar = f.data(ak, s).href || ak.href; al = f.data(am, s).href || am.href; ar = f.isFunction(ar) ? ar.call(ak) : ar; al = f.isFunction(al) ? al.call(am) : al; if (V(ar)) { f("<img/>")[0].src = ar } if (V(al)) { f("<img/>")[0].src = al } } } else { D.hide() } if (q.iframe) { ao = f("<iframe/>").addClass(g + "Iframe")[0]; if (q.fastIframe) { aq() } else { f(ao).one("load", aq) } ao.name = g + (+new Date()); ao.src = q.href; if (!q.scrolling) { ao.scrolling = "no" } if (u) { ao.frameBorder = 0; ao.allowTransparency = "true" } f(ao).appendTo(p).one(N, function () { ao.src = "//about:blank" }) } else { aq() } if (q.transition === "fade") { ad.fadeTo(ag, 1, an) } else { an() } }; if (q.transition === "fade") { ad.fadeTo(ag, 0, function () { y.position(0, aj) }) } else { y.position(ag, aj) } }; y.load = function (ah) { var ai, af, ag = y.prep; j = true; ab = false; c = ac[E]; if (!ah) { A() } v(N); v(i, q.onLoad); q.h = q.height ? aa(q.height, "y") - F - h : q.innerHeight && aa(q.innerHeight, "y"); q.w = q.width ? aa(q.width, "x") - m - U : q.innerWidth && aa(q.innerWidth, "x"); q.mw = q.w; q.mh = q.h; if (q.maxWidth) { q.mw = aa(q.maxWidth, "x") - m - U; q.mw = q.w && q.w < q.mw ? q.w : q.mw } if (q.maxHeight) { q.mh = aa(q.maxHeight, "y") - F - h; q.mh = q.h && q.h < q.mh ? q.h : q.mh } ai = q.href; n = setTimeout(function () { B.show() }, 100); if (q.inline) { k().hide().insertBefore(f(ai)[0]).one(N, function () { f(this).replaceWith(p.children()) }); ag(f(ai)) } else { if (q.iframe) { ag(" ") } else { if (q.html) { ag(q.html) } else { if (V(ai)) { f(ab = new Image()).addClass(g + "Photo").error(function () { q.title = false; ag(k("Error").text("This image could not be loaded")) }).load(function () { var aj; ab.onload = null; if (q.scalePhotos) { af = function () { ab.height -= ab.height * aj; ab.width -= ab.width * aj }; if (q.mw && ab.width > q.mw) { aj = (ab.width - q.mw) / ab.width; af() } if (q.mh && ab.height > q.mh) { aj = (ab.height - q.mh) / ab.height; af() } } if (q.h) { ab.style.marginTop = Math.max(q.h - ab.height, 0) / 2 + "px" } if (ac[1] && (E < ac.length - 1 || q.loop)) { ab.style.cursor = "pointer"; ab.onclick = function () { y.next() } } if (u) { ab.style.msInterpolationMode = "bicubic" } setTimeout(function () { ag(ab) }, 1) }); setTimeout(function () { ab.src = ai }, 1) } else { if (ai) { R.load(ai, q.data, function (al, aj, ak) { ag(aj === "error" ? k("Error").text("Request unsuccessful: " + ak.statusText) : f(this).contents()) }) } } } } } }; y.next = function () { if (!j && ac[1] && (E < ac.length - 1 || q.loop)) { E = E < ac.length - 1 ? E + 1 : 0; y.load() } }; y.prev = function () { if (!j && ac[1] && (E || q.loop)) { E = E ? E - 1 : ac.length - 1; y.load() } }; y.close = function () { if (e && !l) { l = true; e = false; v(z, q.onCleanup); J.unbind("." + g + " ." + T); L.fadeTo(200, 0); ad.stop().fadeTo(300, 0, function () { ad.add(L).css({ opacity: 1, cursor: "auto" }).hide(); v(N); p.remove(); setTimeout(function () { l = false; v(r, q.onClosed) }, 1) }) } }; y.element = function () { return f(c) }; y.settings = C; w = function (af) { if (!((af.button !== 0 && typeof af.button !== "undefined") || af.ctrlKey || af.shiftKey || af.altKey)) { af.preventDefault(); M(this) } }; if (f.fn.delegate) { f(o).delegate("." + S, "click", w) } else { f("." + S).live("click", w) } f(y.init) } (jQuery, document, this));