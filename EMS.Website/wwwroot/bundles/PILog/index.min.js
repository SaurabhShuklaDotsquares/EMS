/*! DataTables Bootstrap 3 integration
 * ï¿½2011-2014 SpryMedia Ltd - datatables.net/license
 */
(function(n,t){var i=function(n,i){"use strict";n.extend(!0,i.defaults,{dom:"<'row'<'col-sm-6'l><'col-sm-6'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",renderer:"bootstrap"});n.extend(i.ext.classes,{sWrapper:"dataTables_wrapper form-inline dt-bootstrap",sFilterInput:"form-control input-sm",sLengthSelect:"form-control input-sm"});i.ext.renderer.pageButton.bootstrap=function(r,u,f,e,o,s){var p=new i.Api(r),w=r.oClasses,l=r.oLanguage.oPaginate,h,c,v=0,y=function(t,i){for(var b,u,k=function(t){t.preventDefault();n(t.currentTarget).hasClass("disabled")||p.page(t.data.action).draw(!1)},e=0,a=i.length;e<a;e++)if(u=i[e],n.isArray(u))y(t,u);else{h="";c="";switch(u){case"ellipsis":h="&hellip;";c="disabled";break;case"first":h=l.sFirst;c=u+(o>0?"":" disabled");break;case"previous":h=l.sPrevious;c=u+(o>0?"":" disabled");break;case"next":h=l.sNext;c=u+(o<s-1?"":" disabled");break;case"last":h=l.sLast;c=u+(o<s-1?"":" disabled");break;default:h=u+1;c=o===u?"active":""}h&&(b=n("<li>",{"class":w.sPageButton+" "+c,id:f===0&&typeof u=="string"?r.sTableId+"_"+u:null}).append(n("<a>",{href:"#","aria-controls":r.sTableId,"data-dt-idx":v,tabindex:r.iTabIndex}).html(h)).appendTo(t),r.oApi._fnBindAction(b,{action:u},k),v++)}},a;try{a=n(t.activeElement).data("dt-idx")}catch(b){}y(n(u).empty().html('<ul class="pagination"/>').children("ul"),e);a&&n(u).find("[data-dt-idx="+a+"]").focus()};i.TableTools&&(n.extend(!0,i.TableTools.classes,{container:"DTTT btn-group",buttons:{normal:"btn btn-default",disabled:"disabled"},collection:{container:"DTTT_dropdown dropdown-menu",buttons:{normal:"",disabled:"disabled"}},print:{info:"DTTT_print_info"},select:{row:"active"}}),n.extend(!0,i.TableTools.DEFAULTS.oTags,{collection:{container:"ul",button:"li",liner:"a"}}))};typeof define=="function"&&define.amd?define(["jquery","datatables"],i):typeof exports=="object"?i(require("jquery"),require("datatables")):jQuery&&i(jQuery,jQuery.fn.dataTable)})(window,document),function(n){function t(){function i(){n(".divoverlay").removeClass("hide");t=new Global.GridHelper("#grid-logList",{serverSide:!0,destroy:!0,pageLength:15,bFilter:!1,bAutoWidth:!1,bLengthChange:!1,ajax:{url:domain+"pilog/index",type:"POST",data:u()},order:[[0,"desc"]],columnDefs:[{width:"1%",targets:0},{width:"2%",targets:1},{width:"15%",targets:2},{width:"10%",targets:3},{width:"10%",targets:4},{width:"10%",targets:5},{width:"7%",targets:6}],columns:[{name:"Id",data:"id",title:"#",sortable:!1,searchable:!1,visible:!1},{name:"rowIndex",data:"rowIndex",title:"#",sortable:!1,searchable:!1,visible:!0},{name:"ProcessName",data:"processName",title:"Process Name",sortable:!1,searchable:!1,visible:!0},{name:"CreateDate",data:"createDate",title:"Date Of Request",sortable:!1,searchable:!1,visible:!0},{name:"Status",data:"status",title:"Status",sortable:!1,searchable:!1,visible:!0},{name:"SuggestedBy",data:"suggestedBy",title:"Suggested By",sortable:!1,searchable:!1,visible:!0},{name:"Action",data:null,title:"Action",sortable:!1,searchable:!1,render:function(t,i,r){var u="";return r.editAllowed&&(u+=n("<a/>",{id:"addEdit","class":"btn btn-default btn-sm",href:domain+"pilog/addedit/"+r.id,"data-toggle":"modal","data-target":"#modal-add-pilog","data-backdrop":"static",html:n("<i/>",{"class":"fa fa-pencil",style:"color:black"}).get(0).outerHTML+"&nbsp; Edit"}).get(0).outerHTML+"&nbsp; "),u+(n("<a/>",{id:"reqApproval","class":"btn btn-default btn-sm",title:"Edit",href:domain+"pilog/requestapproval/"+r.id,"data-toggle":"modal","data-target":"#modal-approve-pilog","data-backdrop":"static",html:n("<i/>",{"class":"fa fa-"+(r.approvalAllowed||r.rollOutAllowed?"check":"info-circle"),style:"color:black"}).get(0).outerHTML+"&nbsp; "+(r.approvalAllowed?"Process":r.rollOutAllowed?"Roll-Out":"Details")}).get(0).outerHTML+"&nbsp; ")}},],fnRowCallback:function(){},fnDrawCallback:function(t){n(".divoverlay").addClass("hide");t._iDisplayLength>t.fnRecordsDisplay()?n(".dataTables_paginate").hide():n(".dataTables_paginate").show();n(".pagination .active a").css("background-color","#e99701");n(".pagination .active a").css("border-color","#e99701")}})}function u(){return{pmId:n("#PMId").val(),status:n("#Status").val()}}function f(){n("#modal-add-pilog").on("loaded.bs.modal",function(){var i=n(this),r=new Global.FormHelper(i.find("form"),{updateTargetId:"NotificationMessage"},null,function(n){n.isSuccess?(i.modal("hide"),t.ajax.reload(),Global.ShowMessage(n.message,!0,"divMessage")):r.find("#NotificationMessage").html(n)})}).on("hidden.bs.modal",function(){n(this).removeData("bs.modal");n(this).find(".modal-content").empty()});n("#modal-approve-pilog").on("loaded.bs.modal",function(){var r=n(this),i=new Global.FormHelper(r.find("form"),{updateTargetId:"NotificationMessage",validateSettings:{ignore:":disabled"}},null,function(n){n.isSuccess?(r.modal("hide"),t.ajax.reload(),Global.ShowMessage(n.message,!0,"divMessage")):i.find("#NotificationMessage").html(n)});i.find("#EstimatedSchedule").datepicker({defaultDate:"+1w",dateFormat:"dd/mm/yy",minDate:0,changeMonth:!0,changeYear:!0,numberOfMonths:1});i.on("change","#Status",function(){switch(parseInt(this.value)){case 2:i.find("#divCancelReason").addClass("hidden").find(":input").prop("disabled",!0);i.find("#divRemarks").removeClass("hidden").find(":input").prop("disabled",!1);i.find("#divEstimatedSchedule").addClass("hidden").find(":input").prop("disabled",!0);break;case 3:i.find("#divCancelReason").addClass("hidden").find(":input").prop("disabled",!0);i.find("#divRemarks").removeClass("hidden").find(":input").prop("disabled",!1);i.find("#divEstimatedSchedule").removeClass("hidden").find(":input").prop("disabled",!1);break;case 10:i.find("#divCancelReason").removeClass("hidden").find(":input").prop("disabled",!1);i.find("#divRemarks").addClass("hidden").find(":input").prop("disabled",!0);i.find("#divEstimatedSchedule").addClass("hidden").find(":input").prop("disabled",!0);break;default:i.find("#divCancelReason").addClass("hidden").find(":input").prop("disabled",!0);i.find("#divRemarks").addClass("hidden").find(":input").prop("disabled",!0);i.find("#divEstimatedSchedule").addClass("hidden").find(":input").prop("disabled",!0)}});i.find("#Status").change();i.on("click","#btn-rollOut",function(n){n.preventDefault();var t=parseInt(i.find("#Id").val());t&&confirm("Are you sure?\nProcess Improvement suggestion will be Roll Out for all users.")&&i.attr("action",domain+"pilog/rollout/"+t).submit()})}).on("hidden.bs.modal",function(){n(this).removeData("bs.modal");n(this).find(".modal-content").empty()});n("#btnSearch").on("click",function(){i()})}var r=this,t;r.init=function(){i();f()}}n(function(){var n=new t;n.init()})}(jQuery);