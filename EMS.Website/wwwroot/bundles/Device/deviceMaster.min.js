(function(n){function t(){function u(){n(".divoverlay").removeClass("hide");t=new Global.GridHelper("#grid-device-table",{serverSide:!0,destroy:!0,ordering:!1,pageLength:15,bFilter:!1,bAutoWidth:!1,bLengthChange:!1,ajax:{url:domain+"device/devicemaster",type:"POST"},columnDefs:[{width:"2%",targets:0},{width:"8%",targets:1},{width:"10%",targets:2},{width:"5%",targets:3},{width:"8%",targets:4},{width:"8%",targets:5},{width:"4%",targets:6},],columns:[{name:"rowIndex",data:"rowIndex",title:"#",sortable:!1,searchable:!1,visible:!0},{name:"DeviceName",data:"deviceName",title:"Device",sortable:!1,searchable:!1,visible:!0,render:function(n,t,i){return i.simDetails==""?n:n+"<br>"+i.simDetails}},{name:"Condition",data:"condition",title:"Description",sortable:!1,searchable:!1,visible:!0},{name:"Quantity",data:"quantity",title:"Quantity",sortable:!1,searchable:!1,visible:!0,render:function(n,t,i){return"<b style='font-weight:600'>Quantity : "+n+"<\/b><br>Assg. Qty : "+i.assignedQuantity+"<br>Stock : "+(n-i.assignedQuantity)}},{name:"AddedBy",data:"addedBy",title:"Added By",sortable:!1,searchable:!1,visible:!0,render:function(n,t,i){return n+"<br>"+i.addedDate}},{name:"ModifiedBy",data:"modifiedBy",title:"Modified By",sortable:!1,searchable:!1,visible:!0,render:function(n,t,i){return n+"<br>"+i.modifiedDate}},{name:"Action",data:null,title:"Action",sortable:!1,searchable:!1,render:function(t,i,r){return""+(n("<a/>",{id:"addEdit","class":"btn btn-default btn-sm",href:domain+"device/AddEditDevice/"+r.id,"data-toggle":"modal","data-target":"#modal-add-edit-device","data-backdrop":"static",html:n("<i/>",{"class":"fa fa-pencil",style:"color:black"}).get(0).outerHTML+"&nbsp; Edit"}).get(0).outerHTML+"&nbsp; ")}}],fnRowCallback:function(){},fnDrawCallback:function(t){n(".divoverlay").addClass("hide");t._iDisplayLength>t.fnRecordsDisplay()?n(".dataTables_paginate").hide():n(".dataTables_paginate").show();n(".pagination .active a").css("background-color","#e99701");n(".pagination .active a").css("border-color","#e99701")}})}function f(){n("#modal-add-edit-device").on("loaded.bs.modal",function(){var u=n(this),r=new Global.FormHelper(u.find("form"),{updateTargetId:"NotificationMessage"},null,function(n){n.isSuccess?(u.modal("hide"),t.ajax.reload(),Global.ShowMessage(n.message,!0,"NotificationMessage")):r.find("#NotificationMessage").html(n)}),f=parseInt(r.find("#Id").val());i(r);r.on("keypress keyup blur",".number",function(t){n(this).val(n(this).val().replace(/[^0-9\.]/g,""));(t.which<48||t.which>57)&&t.preventDefault()});r.on("change","#Quantity",function(){var i,n,t;f>0&&(i=r.find("#spnQuanityError"),i.html(""),n=parseInt(this.value),t=parseInt(r.find("#AssignedQuantity").val()),(n==0||n)&&t>n?(i.html("Device already assigned to "+t+" users, so quantity must be greater than or equal to "+t),r.find(":submit").prop("disabled",!0)):r.find(":submit").prop("disabled",!1))});r.on("change","#DeviceType",function(){i(r)})}).on("hidden.bs.modal",function(){n(this).removeData("bs.modal");n(this).find(".modal-content").empty()});var r=Global.GetUrlVars();r&&r.option&&r.option.trim()=="add"&&n("#AddDevice").click()}function i(n){var i=n.find("#DeviceType").val(),t=n.find(".sim");i==deviceTypeSIM?t.show().find(":input").data("rule-required",!0).data("msg-required","*required"):t.hide().find(":input").data("rule-required",!0).data("msg-required","*required")}var r=this,t;r.init=function(){u();f()}}n(function(){var n=new t;n.init()})})(jQuery);