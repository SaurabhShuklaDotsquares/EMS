(function(){function n(){function t(){var t=$("#team_activity tbody"),i=$("#team_summary");$(".datepicker").datepicker({dateFormat:"dd/mm/yy",changeMonth:!0,changeYear:!0,yearRange:"-100:+0"});$("#clrActivityDate").click(function(){$("#txtActivityDate").val("")});$("a[data-url]").click(function(n){n.preventDefault();window.location.href=domain+$(this).data("url")});$(".moreTech").click(function(){var n=$(this).data("id");$("."+n).show();$(this).parent().hide();$("#"+n+"_less").parent().show()});$(".lessTech").click(function(){var n=$(this).data("id"),t=$(this).data("more");$("."+n).hide();$(this).parent().hide();$("#"+t+"_more").parent().show()});$("#ddl_pm").on("change",function(){var n=$(this).val();$("#ddl_tl").empty();$("#ddl_tl").append("<option value=''>-Select-<\/option>");$.get(domain+"activity/bindtl",{pmId:n},function(n){n.isSucess&&$.each(n.data,function(n,t){$("#ddl_tl").append("<option value='"+t.value+"'>"+t.text+"<\/option>")})})});$(".filter-btn").click(function(){$(".filter-outer").slideToggle("300")});$("#btn_search").on("click",function(){var t=0,f,e,o;$(".divoverlay").removeClass("hide");var i=[],r=[],u=[];t=$("#ddl_pm").val();f=$("#txtActivityDate").val();$(".checkboxtechnology:checked").each(function(){i.push($(this).val())});$(".checkboxdepartment:checked").each(function(){r.push($(this).val())});$(".checkboxavailability:checked").each(function(){u.push($(this).val())});e=$("#ddl_tl").val();o=$("#txtsearch").val();$.post(domain+"activity/GetFilter",{department:r,technologies:i,Avail:u,search:o,leadId:e,pmId:t,activityDate:f},function(t){$("#tbl_grid").html(t);$(".divoverlay").addClass("hide");n()})});$("#MainContent_btnrefresh").click(function(){location.reload()});$("#tbl_grid").on("click","#team_summary td.filter",function(){var n=$(this),u=n.closest("tr").data("pmuid"),r=null;u&&(n.hasClass("active")?(n.removeClass("active"),r=t.children()):(i.find("td.filter.active").removeClass("active"),n.addClass("active"),t.children().fadeOut(),n.data("status")&&n.data("role")?r=t.children("tr."+n.data("status")+"[data-role='"+n.data("role")+"'][data-pmuid='"+u+"']"):n.data("department")?r=t.children("tr[data-department='"+n.data("department")+"'][data-pmuid='"+u+"']"):n.data("status")&&(r=t.children("tr."+n.data("status")+"[data-pmuid='"+u+"']"))),r&&r.length&&r.each(function(n,t){$(t).find("td:first").text(n+1)}).fadeIn())});$("#tbl_grid").on("click","#team_summary td.filter2",function(){var n=$(this),t=n.closest("tr").data("pmuid"),i,r,f,u;if(t)switch(n.data("other")){case"unassigned":i=n.data("unassignedrunning");i&&(i=i.toString(),$.post(domain+"activity/unassignedprojects?pmUid="+t,{runningProjects:i.split(",")},function(n){$("#modal-project-detail").find(".modal-content").html(n).end().modal("show")}));break;case"bucket":r=n.data("bucketrunning");r&&(r=r.toString(),$.post(domain+"activity/bucketprojects?pmUid="+t,{runningProjects:r.split(",")},function(n){$("#modal-project-detail").find(".modal-content").html(n).end().modal("show")}));break;case"bonus":f=n.data("bonusrunning");f&&f.length&&$.post(domain+"activity/bonusprojects?pmUid="+t,{runningDevelopers:f},function(n){$("#modal-project-detail").find(".modal-content").html(n).end().modal("show")});break;case"seo":u=n.data("seorunning");u&&(u=u.toString(),$.post(domain+"activity/seoprojects?pmUid="+t,{runningDevelopers:u.split(",")},function(n){$("#modal-project-detail").find(".modal-content").html(n).end().modal("show")}))}});$("#MainContent_btnExcel").on("click",function(){var n;$(".divoverlay").removeClass("hide");var i=[],r=[],e=[],u=[],f=[];$(".checkboxtechnology").each(function(){this.checked&&i.push($(this).val())});$(".checkboxspecialist").each(function(){this.checked&&r.push($(this).val())});$(".checkboxdepartment").each(function(){this.checked&&e.push($(this).val())});$(".checkboxstatus").each(function(){this.checked&&u.push($(this).val())});$(".checkboxavailability").each(function(){this.checked&&f.push($(this).val())});var o=$("#ddl_tl").val(),s=$("#txtsearch").val(),h=domain+"activity/ExcelExport",t=$("<form><\/form>").attr("action",h).attr("method","post");for(n=0;n<i.length;n++)t.append($("<input><\/input>").attr("type","hidden").attr("name","department").attr("value",i[n]));for(n=0;n<u.length;n++)t.append($("<input><\/input>").attr("type","hidden").attr("name","status").attr("value",u[n]));for(n=0;n<r.length;n++)t.append($("<input><\/input>").attr("type","hidden").attr("name","specialist").attr("value",r[n]));for(n=0;n<i.length;n++)t.append($("<input><\/input>").attr("type","hidden").attr("name","technologies").attr("value",i[n]));for(n=0;n<f.length;n++)t.append($("<input><\/input>").attr("type","hidden").attr("name","Avail").attr("value",f[n]));t.append($("<input><\/input>").attr("type","hidden").attr("name","search").attr("value",s));t.append($("<input><\/input>").attr("type","hidden").attr("name","leadId").attr("value",o));t.appendTo("body").submit().remove();$(".divoverlay").addClass("hide")});$(".modal").on("hidden.bs.modal",function(){$(this).removeData("bs.modal");$(this).find(".modal-content").empty()})}function n(){$("#tbl_grid [data-toggle='tooltip']").tooltip({html:!0})}$this=this;$this.init=function(){t();n()}}$(function(){var t=new n;t.init()})})(jQuery);