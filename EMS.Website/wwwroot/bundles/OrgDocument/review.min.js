/*! DataTables Bootstrap 3 integration
 * ï¿½2011-2014 SpryMedia Ltd - datatables.net/license
 */
(function(n,t){var i=function(n,i){"use strict";n.extend(!0,i.defaults,{dom:"<'row'<'col-sm-6'l><'col-sm-6'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",renderer:"bootstrap"});n.extend(i.ext.classes,{sWrapper:"dataTables_wrapper form-inline dt-bootstrap",sFilterInput:"form-control input-sm",sLengthSelect:"form-control input-sm"});i.ext.renderer.pageButton.bootstrap=function(r,u,f,e,o,s){var p=new i.Api(r),w=r.oClasses,l=r.oLanguage.oPaginate,h,c,v=0,y=function(t,i){for(var b,u,k=function(t){t.preventDefault();n(t.currentTarget).hasClass("disabled")||p.page(t.data.action).draw(!1)},e=0,a=i.length;e<a;e++)if(u=i[e],n.isArray(u))y(t,u);else{h="";c="";switch(u){case"ellipsis":h="&hellip;";c="disabled";break;case"first":h=l.sFirst;c=u+(o>0?"":" disabled");break;case"previous":h=l.sPrevious;c=u+(o>0?"":" disabled");break;case"next":h=l.sNext;c=u+(o<s-1?"":" disabled");break;case"last":h=l.sLast;c=u+(o<s-1?"":" disabled");break;default:h=u+1;c=o===u?"active":""}h&&(b=n("<li>",{"class":w.sPageButton+" "+c,id:f===0&&typeof u=="string"?r.sTableId+"_"+u:null}).append(n("<a>",{href:"#","aria-controls":r.sTableId,"data-dt-idx":v,tabindex:r.iTabIndex}).html(h)).appendTo(t),r.oApi._fnBindAction(b,{action:u},k),v++)}},a;try{a=n(t.activeElement).data("dt-idx")}catch(b){}y(n(u).empty().html('<ul class="pagination"/>').children("ul"),e);a&&n(u).find("[data-dt-idx="+a+"]").focus()};i.TableTools&&(n.extend(!0,i.TableTools.classes,{container:"DTTT btn-group",buttons:{normal:"btn btn-default",disabled:"disabled"},collection:{container:"DTTT_dropdown dropdown-menu",buttons:{normal:"",disabled:"disabled"}},print:{info:"DTTT_print_info"},select:{row:"active"}}),n.extend(!0,i.TableTools.DEFAULTS.oTags,{collection:{container:"ul",button:"li",liner:"a"}}))};typeof define=="function"&&define.amd?define(["jquery","datatables"],i):typeof exports=="object"?i(require("jquery"),require("datatables")):jQuery&&i(jQuery,jQuery.fn.dataTable)})(window,document),function(n){function t(){function f(){var u=n("#modal-orgApprovedDoc");u.on("loaded.bs.modal",function(){var t=new Global.FormHelper(u.find("form"),{updateTargetId:"validation-summary",validateSettings:{ignore:[]}},null,function(t){var i=n("#MessageDiv");Global.IsNotNullOrEmptyString(t.message)?(i.addClass("alert-success").removeClass("alert-danger"),i.empty().html(t.message)):Global.IsNotNullOrEmptyString(t.errorMessage)&&(i.addClass("alert-danger").removeClass("alert-success"),i.empty().html(t.errorMessage));i.show();window.setTimeout(function(){i.html("");i.hide()},5e3);u.modal("hide");r()});t.find("#selectedDoc").html(i)}).on("hidden.bs.modal",function(){u.removeData("bs.modal");u.find(".modal-content").empty()});t.on("click","a.btn-link",function(){i=n(this).closest("tr").find("td:eq(1)").html()})}function r(){t=new Global.GridHelper("#grid-orgdocument",{serverSide:!0,destroy:!0,pageLength:20,bFilter:!1,bAutoWidth:!1,bLengthChange:!1,ajax:{url:domain+"orgdocument/review",type:"Post"},order:[[0,"desc"]],columnDefs:[{width:"1%",targets:0},{width:"3%",targets:1},{width:"20%",targets:2},{width:"10%",targets:3},{width:"20%",targets:4},{width:"20%",targets:5},{width:"10%",targets:6},],columns:[{name:"Id",data:"id",title:"#",sortable:!1,searchable:!1,visible:!1},{name:"rowIndex",data:"rowIndex",title:"#",sortable:!1,searchable:!1,visible:!0},{name:"Document",data:"document",title:"Document",sortable:!1,searchable:!1,visible:!0,render:function(n,t,i){return'<a class="ablue" target="_blank" href="'+i.documentPath+'">'+n+" v"+i.version+"<\/a>"}},{name:"Status",data:"status",title:"Status",sortable:!1,searchable:!1,visible:!0,render:function(n,t,i){return i.status+(i.approvedDate?"<br>"+i.approvedDate:"")}},{name:"Reviewers",data:"reviewers",title:"Approvers",sortable:!1,searchable:!1,visible:!0},{name:"Departments",data:"departments",title:"Access to",sortable:!1,searchable:!1,visible:!0,render:function(n,t,i){var r="";return r+=i.departments?"<b>Departments<\/b> : "+i.departments:"",r+(i.roles?(r!=""?"<br>":"")+"<b>Roles<\/b> : "+i.roles:"")}},{name:"Action",data:"allowApproval",title:"Action",sortable:!1,searchable:!1,render:function(n,t,i){var r="";return i.allowApproval&&!i.selfApproved&&(r='<a title="Approve document" class="btn btn-default btn-sm" data-backdrop="static" data-target="#modal-orgApprovedDoc" data-toggle="modal", href="'+domain+"orgdocument/OrgDocApprove/"+i.id+'"><i class="fa fa-check-square-o"><\/i> Approve<\/a>'),r+(' <a class="btn btn-default btn-sm" href="'+domain+"orgdocument/addedit/"+i.id+'"><i class="fa fa-pencil-square-o"><\/i> Edit<\/a>')}}],fnDrawCallback:function(t){t._iDisplayLength>t.fnRecordsDisplay()?n(".dataTables_paginate").hide():n(".dataTables_paginate").show();n(".pagination .active a").css("background-color","#e99701");n(".pagination .active a").css("border-color","#e99701")}})}var u=this,t,i;u.init=function(){r();f()}}n(function(){var n=new t;n.init()})}(jQuery);