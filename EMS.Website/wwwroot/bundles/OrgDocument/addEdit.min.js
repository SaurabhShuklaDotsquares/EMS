(function(){function n(){function i(){n=new Global.FormHelperWithFiles($("form#orgdocumentForm"),{updateTargetId:"validation-summary",validateSettings:{ignore:""}});$("#HighLevelChanges").length&&(CKEDITOR.replace("HighLevelChanges",{toolbar:"Basic"}),r("HighLevelChanges"));n.on("change","#DocType",function(){var t=parseInt(this.value),n=$("#OrgDocumentMasterId");n.empty();n.append("<option value=''>-Select-<\/option>");t&&$.get(domain+"orgdocument/getdocumentmaster/"+t,function(t){t.isSuccess&&$.each(t.data,function(t,i){n.append("<option value='"+i.value+"'>"+i.text+"<\/option>")})})});n.on("change","#OrgDocumentMasterId",function(){var t=parseInt(this.value),i=$("#currentBaselineDoc");i.empty();n.find("input[name='RoleIds[]']").prop("checked",!1);n.find("input[name='DepartmentIds[]']").prop("checked",!1);t&&$.get(domain+"orgdocument/getdocumentbymasterid/"+t,function(t){if(t.isSuccess&&t.data){var r=t.data;i.html('<div class="alert alert-info"><h5>Current Baseline Document<\/h5><a href="'+(domain+r.DocumentPath)+'">'+r.orgDocumentName+" v"+r.ver+"<\/a><br><b>Added by<\/b> : "+r.createBy+" <b>Approved on<\/b> : "+r.approvedDate+"<\/div>");r.roleIds&&r.roleIds.length&&$.each(r.roleIds,function(t,i){n.find("input[name='RoleIds[]'][value='"+i+"']").prop("checked",!0)});r.departmentIds&&r.departmentIds.length&&$.each(r.departmentIds,function(t,i){console.log(i);n.find("input[name='DepartmentIds[]'][value='"+i+"']").prop("checked",!0)})}})});n.on("change","#allRoles",function(){console.log(this.checked);n.find("input[name='RoleIds[]']").prop("checked",this.checked)});n.on("change","#allDepartments",function(){n.find("input[name='DepartmentIds[]']").prop("checked",this.checked)});n.on("change","input[name='DepartmentIds[]']",function(){var t=n.find("input[name='DepartmentIds[]']");n.find("#allDepartments").prop("checked",t.length==t.filter(":checked").length)});n.on("change","input[name='RoleIds[]']",function(){var t=n.find("input[name='RoleIds[]']");n.find("#allRoles").prop("checked",t.length==t.filter(":checked").length)})}function r(n){CKEDITOR.on("instanceReady",function(t){t.editor.document.on("keyup",function(){CKEDITOR.instances[n].updateElement()})})}var t=this,n;t.init=function(){i()}}$(function(){var t=new n;t.init()})})(jQuery);