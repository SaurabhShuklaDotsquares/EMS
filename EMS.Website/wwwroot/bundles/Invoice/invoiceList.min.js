(function(n){function t(){function f(){t=n("#BAList").addClass("ba");i=n("#TLList").addClass("teamLeader");n(".divoverlay").removeClass("hide");r=new Global.GridHelper("#grid-projectInvoiceList",{serverSide:!0,destroy:!0,paging:!1,bFilter:!1,ordering:!1,bLengthChange:!1,bInfo:!1,bSortable:!1,bAutoWidth:!1,ajax:{url:domain+"Invoice/ProjectInvoiceList",type:"POST"},columnDefs:[{width:"3%",targets:0},{width:"15%",targets:1},{width:"10%",targets:2},{width:"10%",targets:3},{width:"10%",targets:4},{width:"15%",targets:5},{width:"8%",targets:6},{width:"5%",targets:7},{width:"3%",targets:8},{targets:"no-sort",orderable:!1}],columns:[{name:"srNo",data:null,title:"#",sortable:!1,searchable:!1,visible:!0,render:function(n){return"<span>"+n.rowIndex+' <input  type="hidden" name="hdProjectInvoiceID" class="hdProjectInvoiceID" value="'+n.projectInvoiceId+'"/> <input  type="hidden"  name="hdProjectID" class="hdProjectID" value="'+n.projectId+'"/> <input  type="hidden" name="hdClientName"  class="hdClientName" value="'+n.clientName+'"/> <input  type="hidden"  name="hdinvoice_id" class="hdinvoice_id" value="'+n.id+'"/> <input  type="hidden"  name="hdstart_date" class="hdstart_date" value="'+n.startDate+'"/> <input  type="hidden" name="hdend_date" class="hdend_date" value="'+n.endDate+'"/> <input  type="hidden" name="hdtotal_amount" class="hdtotal_amount" value="'+n.invoiceAmount+'"/> <input  type="hidden" name="hdpayment_status_id" class="hdpayment_status_id" value="'+n.invoiceStatus+'"/> <input  type="hidden" name="hdCurrencyID" class="hdCurrencyID" value="'+n.currencyID+'"/>'}},{name:"Project Name",data:"projectName",title:"Project Name",sortable:!1,searchable:!1,visible:!0},{name:"Invoice Number",data:"invoiceNumber",title:"Invoice Number",sortable:!1,searchable:!1,visible:!0},{name:"Invoice Date",data:"invoiceDate",title:"Invoice Date",sortable:!1,searchable:!1,visible:!0},{name:"Invoice Status",data:"invoiceStatus",title:"Invoice Status",sortable:!1,searchable:!1,visible:!0},{name:"baname",data:null,title:"BA Name",sortable:!1,searchable:!1,render:function(n,i,r){return r.baId?t.clone().find("option[value='"+r.baId+"']").attr("selected",!0).end().get(0).outerHTML:t.clone().get(0).outerHTML}},{name:"Team Leader",data:null,title:"Team Leader",sortable:!1,searchable:!1,render:function(n,t,r){return r.tlId?i.clone().find("option[value='"+r.tlId+"']").attr("selected",!0).end().get(0).outerHTML:i.clone().get(0).outerHTML}},{name:"Action",data:"action",title:"Action",sortable:!1,searchable:!1,visible:!0},{name:"",data:null,title:"<input type='checkbox' class='editor-active' id='chkSelectAll'>",sortable:!1,searchable:!1,render:function(){return"<input type='checkbox' class='editor-active chkrow clickrow'>"}}],fnDrawCallback:function(t){n(".divoverlay").addClass("hide");n("#chkSelectAll").on("change",function(){n(this).is(":checked")?n(".chkrow").prop("checked",!0):n(".chkrow").prop("checked",!1)});t._iDisplayLength>t.fnRecordsDisplay()?n(".dataTables_paginate").hide():n(".dataTables_paginate").show();n(".pagination .active a").css("background-color","#e99701");n(".pagination .active a").css("border-color","#e99701")}})}function e(){n("#updateCrminvoices").off("click").on("click",function(){var t=[],i=!1;n.each(n(".clickrow:checked"),function(){var u=n(this).closest("tr"),r=u.find("td:eq(0)"),f=u.find("td:eq(5)"),e=u.find("td:eq(6)"),o;if(f.find(".ba").val()==""||e.find(".teamLeader").val()=="")return i=!0,!1;o={ProjectInvoiceID:r.find(".hdProjectInvoiceID").val(),ProjectID:r.find(".hdProjectID").val(),ClientName:r.find(".hdClientName").val(),invoice_id:r.find(".hdinvoice_id").val(),start_date:r.find(".hdstart_date").val(),end_date:r.find(".hdend_date").val(),invoice_amount:r.find(".hdtotal_amount").val(),invoice_payment_status_id:r.find(".hdpayment_status_id").val(),CurrencyID:r.find(".hdCurrencyID").val(),BA_ID:f.find(".ba").val(),TL_ID:e.find(".teamLeader").val()};t.push(o)});i?(n(".divoverlay").addClass("hide"),Global.ShowMessage("Please select BA and Team Leader in all selected rows to update!",!1,"NotificationMessage")):t.length?(n(".divoverlay").removeClass("hide"),n.ajax({url:"Invoice/UpdateCrmInvoice",type:"post",data:{model:t},success:function(n){n.isSuccess?(r.ajax.reload(),Global.ShowMessage(n.message,!0,"NotificationMessage")):Global.ShowMessage(n.message,!1,"NotificationMessage")},error:function(n){Global.ShowMessage(n.message,!1,"NotificationMessage")},complete:function(){n(".divoverlay").addClass("hide")}})):(n(".divoverlay").addClass("hide"),Global.ShowMessage("Please check atleast one row to update!",!1,"NotificationMessage"))})}var u=this,r,t,i;u.init=function(){f();e()}}n(function(){var n=new t;n.init()})})(jQuery);